<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake Evo</title>

<style>

body{
margin:0;
background:#0b0f1a;
font-family:Courier New,monospace;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
}

/* DEVICE */
.device{
background:#d6d6d6;
padding:20px;
border-radius:25px;
}

/* SCREEN */
.screen{
background:#9bbc0f;
color:#0f380f;
width:320px;
height:360px;
border:6px solid #222;
border-radius:12px;
position:relative;
padding:10px;
box-sizing:border-box;
}

/* TEXT */
#text{
white-space:pre-line;
font-size:14px;
}

/* CANVAS */
canvas{
background:#8bac0f;
display:none;
}

/* INFO */
.info{
display:flex;
justify-content:space-between;
font-size:12px;
}

/* D PAD */
.dpad{
position:absolute;
bottom:20px;
right:20px;
display:grid;
grid-template-columns:var(--size) var(--size) var(--size);
grid-template-rows:var(--size) var(--size) var(--size);
gap:5px;
}

:root{
--size:60px;
}

.btn{
background:#444;
color:white;
border:none;
border-radius:8px;
font-size:18px;
}

.center{
background:#2196f3;
}

/* EDIT PANEL */
.editor{
position:absolute;
top:10px;
right:10px;
background:#222;
color:white;
padding:5px;
font-size:10px;
}

</style>
</head>

<body>

<div class="device">

<div class="screen">

<div id="text"></div>

<canvas id="game" width="300" height="300"></canvas>

<div class="info">
<span>LV <span id="level">1</span></span>
<span>SC <span id="score">0</span></span>
<span>LIFE <span id="life">1</span></span>
</div>

<div class="editor">
Size  
<input type="range" min="40" max="100" value="60"
oninput="resizePad(this.value)">
<br>
X  
<input type="range" min="0" max="200" value="20"
oninput="movePadX(this.value)">
<br>
Y  
<input type="range" min="0" max="200" value="20"
oninput="movePadY(this.value)">
</div>

</div>

<div class="dpad" id="dpad">

<div></div>
<button class="btn" onclick="move('up')">▲</button>
<div></div>

<button class="btn" onclick="move('left')">◄</button>
<button class="btn center" onclick="boost()">●</button>
<button class="btn" onclick="move('right')">►</button>

<div></div>
<button class="btn" onclick="move('down')">▼</button>
<div></div>

</div>

<button onclick="start()">START</button>
<button onclick="pause()">PAUSE</button>

</div>

<script>

/* STATE */

let canvas=document.getElementById("game")
let ctx=canvas.getContext("2d")

let text=document.getElementById("text")

let snake,food,dx,dy
let score=0
let level=1
let speed=300
let life=1

let ghost=false
let shield=false
let multiplier=1

let running=false

/* INTRO */

text.innerText=
`SNAKE EVO

EVOLUTION SYSTEM ACTIVE

Level 5  = Cobra
Level 10 = King Cobra
Level 15 = Mamba
Level 20 = Black Mamba
Level 25 = Python

Press START`

/* START */

function start(){

snake=[{x:10,y:10}]
food=randomFood()

dx=1
dy=0

score=0
level=1
life=1
speed=300

running=true

canvas.style.display="block"
text.innerText=""

loop()

}

/* LOOP */

function loop(){

if(!running)return

update()
draw()

setTimeout(loop,speed)

}

/* UPDATE */

function update(){

let head={
x:snake[0].x+dx,
y:snake[0].y+dy
}

/* WALL */

if(head.x<0||head.y<0||head.x>=20||head.y>=20){

if(ghost){
showText("GHOST MODE ACTIVE")
return
}

if(shield){
shield=false
showText("SHIELD USED")
return
}

life--

if(life<=0){
gameOver()
return
}

showText("LIFE LOST")
return

}

/* EAT */

snake.unshift(head)

if(head.x===food.x&&head.y===food.y){

score+=10*multiplier

level=Math.floor(score/50)+1

applyEvolution()

applyReward()

food=randomFood()

}else{
snake.pop()
}

document.getElementById("score").innerText=score
document.getElementById("level").innerText=level
document.getElementById("life").innerText=life

}

/* EVOLUTION */

function applyEvolution(){

if(level==5)showText("EVOLVED: COBRA")
if(level==10)showText("EVOLVED: KING COBRA")
if(level==15)showText("EVOLVED: MAMBA")
if(level==20)showText("EVOLVED: BLACK MAMBA")
if(level==25)showText("EVOLVED: PYTHON")

speed=Math.max(80,300-(level*10))

}

/* REWARD */

function applyReward(){

let r=Math.random()

if(r<0.2){

ghost=true

showText("REWARD: GHOST MODE")

setTimeout(()=>ghost=false,5000)

}
else if(r<0.4){

shield=true

showText("REWARD: SHIELD")

}
else if(r<0.6){

life++

showText("REWARD: EXTRA LIFE")

}
else if(r<0.8){

multiplier=2

showText("REWARD: MULTIPLIER")

setTimeout(()=>multiplier=1,5000)

}

}

/* TEXT DISPLAY */

function showText(msg){

text.innerText=msg

setTimeout(()=>{
text.innerText=""
},2000)

}

/* DRAW */

function draw(){

ctx.fillStyle="#8bac0f"
ctx.fillRect(0,0,300,300)

ctx.fillStyle="#0f380f"

snake.forEach(s=>{
ctx.fillRect(s.x*15,s.y*15,13,13)
})

ctx.fillStyle="#306230"
ctx.fillRect(food.x*15,food.y*15,13,13)

}

/* FOOD */

function randomFood(){

return{
x:Math.floor(Math.random()*20),
y:Math.floor(Math.random()*20)
}

}

/* MOVE */

function move(d){

if(d=="up"){dx=0;dy=-1}
if(d=="down"){dx=0;dy=1}
if(d=="left"){dx=-1;dy=0}
if(d=="right"){dx=1;dy=0}

}

/* BOOST */

function boost(){

speed=50

setTimeout(()=>{
speed=Math.max(80,300-(level*10))
},1000)

}

/* GAME OVER */

function gameOver(){

running=false

canvas.style.display="none"

text.innerText=
`GAME OVER

Score ${score}
Level ${level}

Press START`

}

/* PAUSE */

function pause(){

running=!running

if(running)loop()

}

/* CUSTOMIZE D PAD */

function resizePad(v){
document.documentElement.style.setProperty('--size',v+"px")
}

function movePadX(v){
document.getElementById("dpad").style.right=v+"px"
}

function movePadY(v){
document.getElementById("dpad").style.bottom=v+"px"
}

</script>

</body>
</html>
