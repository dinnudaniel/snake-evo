<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake Evo</title>

<style>

body{
margin:0;
background:#0b0f1a;
font-family:"Courier New",monospace;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
color:#333;
}

/* DEVICE BODY */
.device{
background:#d6d6d6;
padding:20px;
border-radius:25px;
box-shadow:
inset -5px -5px 10px rgba(0,0,0,.3),
inset 5px 5px 10px rgba(255,255,255,.8);
}

/* GREEN SCREEN */
.screen{
background:#9bbc0f;
color:#0f380f;
width:320px;
height:360px;
border-radius:12px;
border:6px solid #222;
padding:10px;
box-sizing:border-box;
position:relative;
}

/* TEXT AREA */
.textScreen{
white-space:pre-line;
font-size:14px;
}

/* GAME CANVAS */
canvas{
background:#8bac0f;
display:none;
}

/* INFO BAR */
.info{
display:flex;
justify-content:space-between;
font-size:12px;
margin-top:4px;
}

/* D PAD */
.dpad{
display:grid;
grid-template-columns:60px 60px 60px;
grid-template-rows:60px 60px 60px;
gap:6px;
justify-content:center;
margin-top:15px;
}

.btn{
border:none;
border-radius:10px;
background:#444;
color:white;
font-size:20px;
}

.btn:active{
background:#777;
}

.center{
background:#2196f3;
}

</style>
</head>

<body>

<div class="device">

<div class="screen">

<div id="textScreen" class="textScreen"></div>

<canvas id="game" width="300" height="300"></canvas>

<div class="info">
<span>LV <span id="level">1</span></span>
<span>SC <span id="score">0</span></span>
</div>

</div>

<div class="dpad">

<div></div>
<button class="btn" onclick="press('up')">▲</button>
<div></div>

<button class="btn" onclick="press('left')">◄</button>
<button class="btn center" onclick="boost()">●</button>
<button class="btn" onclick="press('right')">►</button>

<div></div>
<button class="btn" onclick="press('down')">▼</button>
<div></div>

</div>

<button onclick="startGame()">START</button>
<button onclick="pauseGame()">PAUSE</button>

</div>

<script>

let state="intro1"
let playerName=""

let textScreen=document.getElementById("textScreen")
let canvas=document.getElementById("game")
let ctx=canvas.getContext("2d")

let grid=15
let snake
let food
let dx,dy
let score
let level
let speed
let running=false

/* INTRO SCREENS */

function showIntro(){

if(state==="intro1"){
textScreen.innerText=
`SNAKE EVO

HOW TO PLAY

Use D-PAD to move snake

Eat prey to grow

Do not hit walls

Press START`
}

if(state==="intro2"){
textScreen.innerText=
`REWARD SYSTEM

FAST = Ghost Mode

MEDIUM = Shield

SLOW = No reward

Press START`
}

if(state==="register"){

playerName=prompt("Enter your name")

textScreen.innerText=
`WELCOME ${playerName}

Press START`
}

if(state==="gameover"){
textScreen.innerText=
`GAME OVER

Score ${score}
Level ${level}

Press START`
}

}

showIntro()

/* START BUTTON */

function startGame(){

if(state==="intro1"){
state="intro2"
showIntro()
return
}

if(state==="intro2"){
state="register"
showIntro()
return
}

if(state==="register"||state==="gameover"){
initGame()
return
}

}

/* INIT GAME */

function initGame(){

snake=[{x:10,y:10}]
food={x:5,y:5}

dx=1
dy=0

score=0
level=1
speed=300

running=true

canvas.style.display="block"
textScreen.innerText=""

loop()

}

/* GAME LOOP */

function loop(){

if(!running)return

update()
draw()

setTimeout(loop,speed)

}

/* UPDATE */

function update(){

let head={
x:snake[0].x+dx,
y:snake[0].y+dy
}

if(
head.x<0||
head.y<0||
head.x>=20||
head.y>=20
){
gameOver()
return
}

snake.unshift(head)

if(head.x===food.x && head.y===food.y){

score+=10

if(score%50===0){
level++
speed=Math.max(80,speed-20)
}

food={
x:Math.floor(Math.random()*20),
y:Math.floor(Math.random()*20)
}

document.getElementById("score").innerText=score
document.getElementById("level").innerText=level

}else{
snake.pop()
}

}

/* DRAW */

function draw(){

ctx.fillStyle="#8bac0f"
ctx.fillRect(0,0,300,300)

ctx.fillStyle="#0f380f"

snake.forEach(s=>{
ctx.fillRect(s.x*grid,s.y*grid,grid-2,grid-2)
})

ctx.fillStyle="#306230"
ctx.fillRect(food.x*grid,food.y*grid,grid-2,grid-2)

}

/* GAME OVER */

function gameOver(){

running=false
canvas.style.display="none"

state="gameover"

showIntro()

}

/* CONTROLS */

function press(dir){

if(dir==="up"){dx=0;dy=-1}
if(dir==="down"){dx=0;dy=1}
if(dir==="left"){dx=-1;dy=0}
if(dir==="right"){dx=1;dy=0}

}

/* BOOST IN CENTER */

function boost(){

let oldSpeed=speed
speed=50

setTimeout(()=>{
speed=oldSpeed
},1000)

}

function pauseGame(){
running=!running
if(running)loop()
}

</script>

</body>
</html>
